var Xe=Object.defineProperty;var we=Object.getOwnPropertySymbols;var Ze=Object.prototype.hasOwnProperty,et=Object.prototype.propertyIsEnumerable;var ye=(s,t,r)=>t in s?Xe(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,ge=(s,t)=>{for(var r in t||(t={}))Ze.call(t,r)&&ye(s,r,t[r]);if(we)for(var r of we(t))et.call(t,r)&&ye(s,r,t[r]);return s};import{S as te,i as re,s as le,e as v,k as I,c as w,a as y,m as S,d as m,b as p,g as V,F as $,a1 as Ee,H as R,U as ie,V as xe,J as Z,G as Q,a2 as z,I as X,w as O,x as P,y as M,q as x,o as k,B as j,a3 as ke,a4 as Te,t as Y,h as K,a5 as Ce,a6 as De,n as oe,a7 as Ie,p as ue,a8 as Se,a9 as Ne,aa as Ve,l as Ae,T as ce,ab as he,ac as tt,P as rt}from"../chunks/vendor-0536b2c5.js";import{b as A,s as ne,C as Be,p as fe,d as lt,r as Ue,e as Le,E as nt,f as ze,a as at,c as st}from"../chunks/characters-ae3937c7.js";import{u as Oe}from"../chunks/auth-ace2d5de.js";function Pe(s,t,r){const e=s.slice();return e[5]=t[r],e[7]=r,e}function Me(s,t,r){const e=s.slice();return e[8]=t[r],e[9]=t,e[10]=r,e}function je(s){let t,r,e;function l(){return s[2](s[8],s[9],s[10])}function n(){return s[4](s[8],s[9],s[10])}return{c(){t=v("button"),this.h()},l(a){t=w(a,"BUTTON",{class:!0,"aria-label":!0}),y(t).forEach(m),this.h()},h(){p(t,"class","h-8 w-8 border-r border-b border-gray-500 svelte-10e1y9i"),p(t,"aria-label","grid cell at x: "+s[10]+" y:"+s[7]),Ee(t,"active",s[8])},m(a,u){V(a,t,u),r||(e=[R(t,"mousedown",l),R(t,"mouseup",s[3]),R(t,"mouseenter",n)],r=!0)},p(a,u){s=a,u&2&&Ee(t,"active",s[8])},d(a){a&&m(t),r=!1,ie(e)}}}function qe(s){let t,r,e=s[5],l=[];for(let n=0;n<e.length;n+=1)l[n]=je(Me(s,e,n));return{c(){t=v("div");for(let n=0;n<l.length;n+=1)l[n].c();r=I(),this.h()},l(n){t=w(n,"DIV",{class:!0});var a=y(t);for(let u=0;u<l.length;u+=1)l[u].l(a);r=S(a),a.forEach(m),this.h()},h(){p(t,"class","flex")},m(n,a){V(n,t,a);for(let u=0;u<l.length;u+=1)l[u].m(t,null);$(t,r)},p(n,a){if(a&3){e=n[5];let u;for(u=0;u<e.length;u+=1){const o=Me(n,e,u);l[u]?l[u].p(o,a):(l[u]=je(o),l[u].c(),l[u].m(t,r))}for(;u<l.length;u+=1)l[u].d(1);l.length=e.length}},d(n){n&&m(t),xe(l,n)}}}function it(s){let t,r=s[1].grid,e=[];for(let l=0;l<r.length;l+=1)e[l]=qe(Pe(s,r,l));return{c(){t=v("div");for(let l=0;l<e.length;l+=1)e[l].c();this.h()},l(l){t=w(l,"DIV",{class:!0});var n=y(t);for(let a=0;a<e.length;a+=1)e[a].l(n);n.forEach(m),this.h()},h(){p(t,"class","board w-max border-l border-t border-gray-500 svelte-10e1y9i")},m(l,n){V(l,t,n);for(let a=0;a<e.length;a+=1)e[a].m(t,null)},p(l,[n]){if(n&3){r=l[1].grid;let a;for(a=0;a<r.length;a+=1){const u=Pe(l,r,a);e[a]?e[a].p(u,n):(e[a]=qe(u),e[a].c(),e[a].m(t,null))}for(;a<e.length;a+=1)e[a].d(1);e.length=r.length}},i:Z,o:Z,d(l){l&&m(t),xe(e,l)}}}function ot(s,t,r){let e;Q(s,A,o=>r(1,e=o));let l=!1;return[l,e,(o,f,g)=>{r(0,l=!0),z(A,f[g]=!o,e)},()=>{r(0,l=!1)},(o,f,g)=>{l&&z(A,f[g]=!o,e)}]}class ut extends te{constructor(t){super();re(this,t,ot,it,le,{})}}function ct(s){let t,r,e,l,n,a,u,o,f,g,c,i,d,b,h,_,T,U;return l=new X({props:{icon:"ic:sharp-chevron-left",rotate:"90deg"}}),u=new X({props:{icon:"ic:sharp-chevron-left"}}),f=new ut({}),i=new X({props:{icon:"ic:sharp-chevron-right"}}),h=new X({props:{icon:"ic:sharp-chevron-right",rotate:"90deg"}}),{c(){t=v("div"),r=v("div"),e=v("button"),O(l.$$.fragment),n=I(),a=v("button"),O(u.$$.fragment),o=I(),O(f.$$.fragment),g=I(),c=v("button"),O(i.$$.fragment),d=I(),b=v("button"),O(h.$$.fragment),this.h()},l(E){t=w(E,"DIV",{class:!0});var B=y(t);r=w(B,"DIV",{class:!0});var q=y(r);e=w(q,"BUTTON",{class:!0,title:!0});var F=y(e);P(l.$$.fragment,F),F.forEach(m),n=S(q),a=w(q,"BUTTON",{class:!0,title:!0});var N=y(a);P(u.$$.fragment,N),N.forEach(m),o=S(q),P(f.$$.fragment,q),g=S(q),c=w(q,"BUTTON",{class:!0,title:!0});var C=y(c);P(i.$$.fragment,C),C.forEach(m),d=S(q),b=w(q,"BUTTON",{class:!0,title:!0});var D=y(b);P(h.$$.fragment,D),D.forEach(m),q.forEach(m),B.forEach(m),this.h()},h(){p(e,"class","btn btn-up mx-4 h-8 svelte-13uhwqx"),p(e,"title","move grid content up"),p(a,"class","btn btn-left my-4 w-8 svelte-13uhwqx"),p(a,"title","move grid content left"),p(c,"class","btn btn-right my-4 w-8 svelte-13uhwqx"),p(c,"title","move grid content right"),p(b,"class","btn btn-down mx-4 h-8 svelte-13uhwqx"),p(b,"title","move grid content down"),p(r,"class","mb-11 grid w-max gap-2 svelte-13uhwqx"),p(t,"class","mx-auto w-max")},m(E,B){V(E,t,B),$(t,r),$(r,e),M(l,e,null),$(r,n),$(r,a),M(u,a,null),$(r,o),M(f,r,null),$(r,g),$(r,c),M(i,c,null),$(r,d),$(r,b),M(h,b,null),_=!0,T||(U=[R(e,"click",s[0].bind(null,0,1)),R(a,"click",s[0].bind(null,1,0)),R(c,"click",s[0].bind(null,-1,0)),R(b,"click",s[0].bind(null,0,-1))],T=!0)},p:Z,i(E){_||(x(l.$$.fragment,E),x(u.$$.fragment,E),x(f.$$.fragment,E),x(i.$$.fragment,E),x(h.$$.fragment,E),_=!0)},o(E){k(l.$$.fragment,E),k(u.$$.fragment,E),k(f.$$.fragment,E),k(i.$$.fragment,E),k(h.$$.fragment,E),_=!1},d(E){E&&m(t),j(l),j(u),j(f),j(i),j(h),T=!1,ie(U)}}}function ft(s,t,r){let e;Q(s,A,n=>r(1,e=n));function l(n,a){z(A,e.grid=new Array(e.height).fill(!1).map((u,o)=>new Array(e.width).fill(!1).map((f,g)=>{var c,i;return(i=(c=e.grid[(a+o+e.height)%e.height])==null?void 0:c[(n+g+e.width)%e.width])!=null?i:!1})),e)}return[l]}class dt extends te{constructor(t){super();re(this,t,ft,ct,le,{})}}function se(s,t){return t?ge(ge({},JSON.parse(JSON.stringify(s))),t):JSON.parse(JSON.stringify(s))}function Re(s,t,r){const e=s.slice();return e[5]=t[r],e}function Fe(s){let t,r;return{c(){t=v("div"),r=Y(`Saved characters will appear here
		`),this.h()},l(e){t=w(e,"DIV",{class:!0});var l=y(t);r=K(l,`Saved characters will appear here
		`),l.forEach(m),this.h()},h(){p(t,"class","empty w-full p-8 rounded-lg opacity-60 pointer-events-none")},m(e,l){V(e,t,l),$(t,r)},d(e){e&&m(t)}}}function Je(s,t){let r,e,l,n,a=Z,u;return e=new Be({props:{character:t[5]}}),e.$on("open",t[3]),{key:s,first:null,c(){r=v("div"),O(e.$$.fragment),l=I(),this.h()},l(o){r=w(o,"DIV",{});var f=y(r);P(e.$$.fragment,f),l=S(f),f.forEach(m),this.h()},h(){this.first=r},m(o,f){V(o,r,f),M(e,r,null),$(r,l),u=!0},p(o,f){t=o;const g={};f&1&&(g.character=t[5]),e.$set(g)},r(){n=r.getBoundingClientRect()},f(){ke(r),a()},a(){a(),a=Te(r,n,Ne,{duration:_e})},i(o){u||(x(e.$$.fragment,o),u=!0)},o(o){k(e.$$.fragment,o),u=!1},d(o){o&&m(r),j(e)}}}function ht(s){let t,r,e,l,n=[],a=new Map,u,o,f,g,c=s[0];const i=b=>b[5].id;for(let b=0;b<c.length;b+=1){let h=Re(s,c,b),_=i(h);a.set(_,n[b]=Je(_,h))}let d=null;return c.length||(d=Fe()),{c(){t=v("h2"),r=Y("Saved"),e=I(),l=v("ul");for(let b=0;b<n.length;b+=1)n[b].c();d&&d.c(),this.h()},l(b){t=w(b,"H2",{class:!0});var h=y(t);r=K(h,"Saved"),h.forEach(m),e=S(b),l=w(b,"UL",{class:!0});var _=y(l);for(let T=0;T<n.length;T+=1)n[T].l(_);d&&d.l(_),_.forEach(m),this.h()},h(){p(t,"class","mb-2 w-full font-semibold text-gray-500"),p(l,"class","flex flex-wrap gap-2")},m(b,h){V(b,t,h),$(t,r),V(b,e,h),V(b,l,h);for(let _=0;_<n.length;_+=1)n[_].m(l,null);d&&d.m(l,null),o=!0,f||(g=[Ce(u=De.call(null,l,{items:s[0],flipDurationMs:_e,dropTargetClasses:["dragging"],dropTargetStyle:{}})),R(l,"consider",s[1]),R(l,"finalize",s[2])],f=!0)},p(b,[h]){if(h&9){c=b[0],oe();for(let _=0;_<n.length;_+=1)n[_].r();n=Ie(n,h,i,1,b,c,a,l,Ve,Je,null,Re);for(let _=0;_<n.length;_+=1)n[_].a();ue(),c.length?d&&(d.d(1),d=null):d||(d=Fe(),d.c(),d.m(l,null))}u&&Se(u.update)&&h&1&&u.update.call(null,{items:b[0],flipDurationMs:_e,dropTargetClasses:["dragging"],dropTargetStyle:{}})},i(b){if(!o){for(let h=0;h<c.length;h+=1)x(n[h]);o=!0}},o(b){for(let h=0;h<n.length;h+=1)k(n[h]);o=!1},d(b){b&&m(t),b&&m(e),b&&m(l);for(let h=0;h<n.length;h+=1)n[h].d();d&&d.d(),f=!1,ie(g)}}}const _e=300;function mt(s,t,r){let e;Q(s,ne,o=>r(4,e=o));let l=[];ne.subscribe(o=>{console.log("savedCharacters changed",o),r(0,l=se(o))});function n(o){console.log("consider"),r(0,l=o.detail.items)}function a(o){console.log("finalize"),z(ne,e=o.detail.items,e)}function u(o){A.set(se(o.detail))}return[l,n,a,u]}class pt extends te{constructor(t){super();re(this,t,mt,ht,le,{})}}function He(s,t,r){const e=s.slice();return e[6]=t[r],e}function gt(s){let t,r;return{c(){t=v("div"),r=Y("You must be logged in to publish"),this.h()},l(e){t=w(e,"DIV",{class:!0});var l=y(t);r=K(l,"You must be logged in to publish"),l.forEach(m),this.h()},h(){p(t,"class","empty border-2 border-gray-400 border-dashed w-full p-8 rounded-lg opacity-60 pointer-events-none")},m(e,l){V(e,t,l),$(t,r)},p:Z,i:Z,o:Z,d(e){e&&m(t)}}}function _t(s){let t,r=[],e=new Map,l,n,a,u,o=s[0];const f=c=>c[6].id;for(let c=0;c<o.length;c+=1){let i=He(s,o,c),d=f(i);e.set(d,r[c]=Ye(d,i))}let g=null;return o.length||(g=Ge()),{c(){t=v("ul");for(let c=0;c<r.length;c+=1)r[c].c();g&&g.c(),this.h()},l(c){t=w(c,"UL",{class:!0});var i=y(t);for(let d=0;d<r.length;d+=1)r[d].l(i);g&&g.l(i),i.forEach(m),this.h()},h(){p(t,"class","flex flex-wrap gap-2")},m(c,i){V(c,t,i);for(let d=0;d<r.length;d+=1)r[d].m(t,null);g&&g.m(t,null),n=!0,a||(u=[Ce(l=De.call(null,t,{items:s[0],flipDurationMs:$e,dropTargetClasses:["dragging"],dropTargetStyle:{}})),R(t,"consider",s[2]),R(t,"finalize",s[3])],a=!0)},p(c,i){if(i&17){o=c[0],oe();for(let d=0;d<r.length;d+=1)r[d].r();r=Ie(r,i,f,1,c,o,e,t,Ve,Ye,null,He);for(let d=0;d<r.length;d+=1)r[d].a();ue(),o.length?g&&(g.d(1),g=null):g||(g=Ge(),g.c(),g.m(t,null))}l&&Se(l.update)&&i&1&&l.update.call(null,{items:c[0],flipDurationMs:$e,dropTargetClasses:["dragging"],dropTargetStyle:{}})},i(c){if(!n){for(let i=0;i<o.length;i+=1)x(r[i]);n=!0}},o(c){for(let i=0;i<r.length;i+=1)k(r[i]);n=!1},d(c){c&&m(t);for(let i=0;i<r.length;i+=1)r[i].d();g&&g.d(),a=!1,ie(u)}}}function Ge(s){let t,r;return{c(){t=v("div"),r=Y(`Drag here to publish
			`),this.h()},l(e){t=w(e,"DIV",{class:!0});var l=y(t);r=K(l,`Drag here to publish
			`),l.forEach(m),this.h()},h(){p(t,"class","empty border-2 border-gray-400 border-dashed w-full p-8 rounded-lg opacity-60 pointer-events-none")},m(e,l){V(e,t,l),$(t,r)},d(e){e&&m(t)}}}function Ye(s,t){let r,e,l,n,a=Z,u;return e=new Be({props:{character:t[6]}}),e.$on("open",t[4]),{key:s,first:null,c(){r=v("div"),O(e.$$.fragment),l=I(),this.h()},l(o){r=w(o,"DIV",{});var f=y(r);P(e.$$.fragment,f),l=S(f),f.forEach(m),this.h()},h(){this.first=r},m(o,f){V(o,r,f),M(e,r,null),$(r,l),u=!0},p(o,f){t=o;const g={};f&1&&(g.character=t[6]),e.$set(g)},r(){n=r.getBoundingClientRect()},f(){ke(r),a()},a(){a(),a=Te(r,n,Ne,{duration:$e})},i(o){u||(x(e.$$.fragment,o),u=!0)},o(o){k(e.$$.fragment,o),u=!1},d(o){o&&m(r),j(e)}}}function $t(s){let t,r,e,l,n,a,u;const o=[_t,gt],f=[];function g(c,i){return c[1]?0:1}return l=g(s),n=f[l]=o[l](s),{c(){t=v("h2"),r=Y("Published"),e=I(),n.c(),a=Ae(),this.h()},l(c){t=w(c,"H2",{class:!0});var i=y(t);r=K(i,"Published"),i.forEach(m),e=S(c),n.l(c),a=Ae(),this.h()},h(){p(t,"class","my-2 w-full font-semibold text-gray-500")},m(c,i){V(c,t,i),$(t,r),V(c,e,i),f[l].m(c,i),V(c,a,i),u=!0},p(c,[i]){let d=l;l=g(c),l===d?f[l].p(c,i):(oe(),k(f[d],1,1,()=>{f[d]=null}),ue(),n=f[l],n?n.p(c,i):(n=f[l]=o[l](c),n.c()),x(n,1),n.m(a.parentNode,a))},i(c){u||(x(n),u=!0)},o(c){k(n),u=!1},d(c){c&&m(t),c&&m(e),f[l].d(c),c&&m(a)}}}const $e=300;function bt(s,t,r){let e,l;Q(s,fe,f=>r(5,e=f)),Q(s,Oe,f=>r(1,l=f));let n=[];function a(f){console.log("consider"),r(0,n=f.detail.items)}function u(f){console.log("finalize",f),r(0,n=f.detail.items.map(lt));const g=n.map(i=>i.id);e.filter(i=>!g.includes(i.id)).forEach(i=>{Ue(i),i.published=!1,i.saved=!0}),Le(l,n),z(fe,e=n,e)}function o(f){A.set(se(f.detail))}return s.$$.update=()=>{s.$$.dirty&32&&r(0,n=e)},[n,l,a,u,o,e]}class vt extends te{constructor(t){super();re(this,t,bt,$t,le,{})}}function wt(s){let t,r,e,l;return t=new pt({}),e=new vt({}),{c(){O(t.$$.fragment),r=I(),O(e.$$.fragment)},l(n){P(t.$$.fragment,n),r=S(n),P(e.$$.fragment,n)},m(n,a){M(t,n,a),V(n,r,a),M(e,n,a),l=!0},p:Z,i(n){l||(x(t.$$.fragment,n),x(e.$$.fragment,n),l=!0)},o(n){k(t.$$.fragment,n),k(e.$$.fragment,n),l=!1},d(n){j(t,n),n&&m(r),j(e,n)}}}class yt extends te{constructor(t){super();re(this,t,null,wt,le,{})}}function Et(s){let t,r,e,l,n,a,u,o,f,g,c,i,d,b,h,_,T,U,E,B,q,F,N,C,D,J,H;return h=new X({props:{icon:"mdi:restore",class:"text-lg"}}),B=new X({props:{icon:"ic:sharp-auto-fix-high"}}),C=new X({props:{icon:"mdi:delete"}}),{c(){t=v("div"),r=v("div"),e=v("label"),l=Y("Size"),n=I(),a=v("div"),u=v("input"),o=I(),f=v("span"),g=Y("x"),c=I(),i=v("input"),d=I(),b=v("button"),O(h.$$.fragment),_=I(),T=v("div"),U=v("button"),E=Y("INVERT "),O(B.$$.fragment),q=I(),F=v("button"),N=Y("CLEAR "),O(C.$$.fragment),this.h()},l(L){t=w(L,"DIV",{class:!0});var G=y(t);r=w(G,"DIV",{});var ee=y(r);e=w(ee,"LABEL",{for:!0,class:!0});var ae=y(e);l=K(ae,"Size"),ae.forEach(m),n=S(ee),a=w(ee,"DIV",{class:!0});var W=y(a);u=w(W,"INPUT",{class:!0,id:!0,"aria-label":!0,type:!0}),o=S(W),f=w(W,"SPAN",{});var be=y(f);g=K(be,"x"),be.forEach(m),c=S(W),i=w(W,"INPUT",{class:!0,id:!0,"aria-label":!0,type:!0}),d=S(W),b=w(W,"BUTTON",{class:!0,title:!0});var ve=y(b);P(h.$$.fragment,ve),ve.forEach(m),W.forEach(m),ee.forEach(m),_=S(G),T=w(G,"DIV",{class:!0});var de=y(T);U=w(de,"BUTTON",{class:!0,title:!0});var me=y(U);E=K(me,"INVERT "),P(B.$$.fragment,me),me.forEach(m),q=S(de),F=w(de,"BUTTON",{class:!0,title:!0});var pe=y(F);N=K(pe,"CLEAR "),P(C.$$.fragment,pe),pe.forEach(m),de.forEach(m),G.forEach(m),this.h()},h(){p(e,"for","size"),p(e,"class","font-semibold text-gray-500"),p(u,"class","h-8 w-20 rounded border-none bg-gray-200 px-4 py-1"),p(u,"id","size"),p(u,"aria-label","width"),p(u,"type","number"),p(i,"class","h-8 w-20 rounded border-none bg-gray-200 px-4 py-1"),p(i,"id","size"),p(i,"aria-label","height"),p(i,"type","number"),p(b,"class","grid h-8 w-8 place-items-center rounded bg-red text-white"),p(b,"title","Reset grid size"),p(a,"class","mb-4 flex gap-4"),p(U,"class","flex grow items-center justify-center gap-2 rounded bg-green py-1 px-2 font-bold text-white"),p(U,"title","Invert grid cells."),p(F,"class","flex grow items-center justify-center gap-2 rounded bg-red py-1 px-2 font-bold text-white"),p(F,"title","clear grid"),p(T,"class","flex justify-center gap-1"),p(t,"class","mx-auto w-max")},m(L,G){V(L,t,G),$(t,r),$(r,e),$(e,l),$(r,n),$(r,a),$(a,u),ce(u,s[0].width),$(a,o),$(a,f),$(f,g),$(a,c),$(a,i),ce(i,s[0].height),$(a,d),$(a,b),M(h,b,null),$(t,_),$(t,T),$(T,U),$(U,E),M(B,U,null),$(T,q),$(T,F),$(F,N),M(C,F,null),D=!0,J||(H=[R(u,"input",s[4]),R(i,"input",s[5]),R(b,"click",s[3]),R(U,"click",s[1]),R(F,"click",s[2])],J=!0)},p(L,[G]){G&1&&he(u.value)!==L[0].width&&ce(u,L[0].width),G&1&&he(i.value)!==L[0].height&&ce(i,L[0].height)},i(L){D||(x(h.$$.fragment,L),x(B.$$.fragment,L),x(C.$$.fragment,L),D=!0)},o(L){k(h.$$.fragment,L),k(B.$$.fragment,L),k(C.$$.fragment,L),D=!1},d(L){L&&m(t),j(h),j(B),j(C),J=!1,ie(H)}}}function xt(s,t,r){let e;Q(s,A,f=>r(0,e=f));function l(){z(A,e.grid=new Array(e.height).fill(!1).map((f,g)=>new Array(e.width).fill(!1).map((c,i)=>{var d;return!((d=e.grid[g])==null?void 0:d[i])})),e)}function n(){z(A,e.grid=new Array(e.height).fill(!1).map(()=>new Array(e.width).fill(!1).map(()=>!1)),e)}function a(){z(A,e.width=5,e),z(A,e.height=8,e)}function u(){e.width=he(this.value),A.set(e)}function o(){e.height=he(this.value),A.set(e)}return[e,l,n,a,u,o]}class kt extends te{constructor(t){super();re(this,t,xt,Et,le,{})}}function Ke(s){let t,r,e,l;return e=new X({props:{icon:"mdi:delete",class:"text-lg"}}),{c(){t=v("button"),r=Y("DELETE "),O(e.$$.fragment),this.h()},l(n){t=w(n,"BUTTON",{class:!0,type:!0,id:!0});var a=y(t);r=K(a,"DELETE "),P(e.$$.fragment,a),a.forEach(m),this.h()},h(){p(t,"class","flex h-8 grow items-center justify-center gap-2 rounded bg-red px-4 py-2 font-bold text-white"),p(t,"type","submit"),p(t,"id","delete")},m(n,a){V(n,t,a),$(t,r),M(e,t,null),l=!0},i(n){l||(x(e.$$.fragment,n),l=!0)},o(n){k(e.$$.fragment,n),l=!1},d(n){n&&m(t),j(e)}}}function Qe(s){let t,r,e,l;return e=new X({props:{icon:"mdi:content-duplicate",class:"text-lg"}}),{c(){t=v("button"),r=Y("DUPLICATE "),O(e.$$.fragment),this.h()},l(n){t=w(n,"BUTTON",{class:!0,type:!0,id:!0});var a=y(t);r=K(a,"DUPLICATE "),P(e.$$.fragment,a),a.forEach(m),this.h()},h(){p(t,"class","mb-4 flex h-8 w-full items-center justify-center gap-2 rounded bg-blue px-4 py-2 font-bold text-white"),p(t,"type","submit"),p(t,"id","duplicate")},m(n,a){V(n,t,a),$(t,r),M(e,t,null),l=!0},i(n){l||(x(e.$$.fragment,n),l=!0)},o(n){k(e.$$.fragment,n),l=!1},d(n){n&&m(t),j(e)}}}function Tt(s){let t,r,e,l,n,a,u,o,f,g,c,i,d,b,h,_,T,U,E,B,q,F;c=new X({props:{icon:"ic:baseline-save",class:"text-lg"}});let N=(s[0].saved||s[0].published)&&Ke(),C=(s[0].saved||s[0].published)&&Qe();return E=new nt({props:{character:s[0]}}),{c(){t=v("div"),r=v("form"),e=v("label"),l=Y("Name"),n=I(),a=v("input"),u=I(),o=v("div"),f=v("button"),g=Y("SAVE "),O(c.$$.fragment),i=I(),N&&N.c(),d=I(),C&&C.c(),b=I(),h=v("div"),_=v("label"),T=Y("Export"),U=I(),O(E.$$.fragment),this.h()},l(D){t=w(D,"DIV",{class:!0});var J=y(t);r=w(J,"FORM",{class:!0});var H=y(r);e=w(H,"LABEL",{for:!0,class:!0});var L=y(e);l=K(L,"Name"),L.forEach(m),n=S(H),a=w(H,"INPUT",{class:!0,id:!0,type:!0}),u=S(H),o=w(H,"DIV",{class:!0});var G=y(o);f=w(G,"BUTTON",{class:!0,type:!0,id:!0});var ee=y(f);g=K(ee,"SAVE "),P(c.$$.fragment,ee),ee.forEach(m),i=S(G),N&&N.l(G),G.forEach(m),d=S(H),C&&C.l(H),H.forEach(m),b=S(J),h=w(J,"DIV",{class:!0});var ae=y(h);_=w(ae,"LABEL",{for:!0,class:!0});var W=y(_);T=K(W,"Export"),W.forEach(m),U=S(ae),P(E.$$.fragment,ae),ae.forEach(m),J.forEach(m),this.h()},h(){p(e,"for","name"),p(e,"class","font-semibold text-gray-500"),p(a,"class","h-8 w-full rounded border-none bg-gray-200 px-2 py-2"),p(a,"id","name"),p(a,"type","text"),a.required=!0,p(f,"class","flex h-8 grow items-center justify-center gap-2 rounded bg-green px-4 py-2 font-bold text-white"),p(f,"type","submit"),p(f,"id","save"),p(o,"class","mb-2 mt-2 flex gap-2"),p(r,"class","w-max"),p(_,"for","name"),p(_,"class","font-semibold text-gray-500"),p(h,"class","mb-4"),p(t,"class","flex gap-5")},m(D,J){V(D,t,J),$(t,r),$(r,e),$(e,l),$(r,n),$(r,a),ce(a,s[0].name),$(r,u),$(r,o),$(o,f),$(f,g),M(c,f,null),$(o,i),N&&N.m(o,null),$(r,d),C&&C.m(r,null),$(t,b),$(t,h),$(h,_),$(_,T),$(h,U),M(E,h,null),B=!0,q||(F=[R(a,"input",s[2]),R(r,"submit",tt(s[1]))],q=!0)},p(D,[J]){J&1&&a.value!==D[0].name&&ce(a,D[0].name),D[0].saved||D[0].published?N?J&1&&x(N,1):(N=Ke(),N.c(),x(N,1),N.m(o,null)):N&&(oe(),k(N,1,1,()=>{N=null}),ue()),D[0].saved||D[0].published?C?J&1&&x(C,1):(C=Qe(),C.c(),x(C,1),C.m(r,null)):C&&(oe(),k(C,1,1,()=>{C=null}),ue());const H={};J&1&&(H.character=D[0]),E.$set(H)},i(D){B||(x(c.$$.fragment,D),x(N),x(C),x(E.$$.fragment,D),B=!0)},o(D){k(c.$$.fragment,D),k(N),k(C),k(E.$$.fragment,D),B=!1},d(D){D&&m(t),j(c),N&&N.d(),C&&C.d(),j(E),q=!1,ie(F)}}}function Ct(s,t,r){let e,l,n,a;Q(s,A,i=>r(0,e=i)),Q(s,ne,i=>r(3,l=i)),Q(s,fe,i=>r(4,n=i)),Q(s,Oe,i=>r(5,a=i));function u(){e.saved?z(ne,l=l.map(i=>i.id===e.id?e:i),l):e.published?(z(fe,n=n.map(i=>i.id===e.id?e:i),n),Le(a,n)):(z(A,e.saved=!0,e),z(ne,l=[...l,se(e)],l))}async function o(){let i=0;e.saved?(l.forEach((d,b)=>{d.id===e.id&&(i=b)}),z(ne,l=l.filter(d=>d.id!==e.id),l),i=Math.min(i,l.length-1),l[i]?z(A,e=se(l[i]),e):z(A,e=ze(),e)):e.published&&(n.forEach((d,b)=>{d.id===e.id&&(i=b)}),Ue(e),z(fe,n=n.filter(d=>d.id!==e.id),n),i=Math.min(i,n.length-1),l[i]?z(A,e=se(n[i]),e):z(A,e=ze(),e))}function f(){z(ne,l=[...l,se(e,{id:Math.floor(Math.random()*10**15),saved:!0,published:!1})],l)}const g=function(i){i.submitter.id==="save"?u():i.submitter.id==="delete"?o():i.submitter.id==="duplicate"&&f()};function c(){e.name=this.value,A.set(e)}return[e,g,c]}class Dt extends te{constructor(t){super();re(this,t,Ct,Tt,le,{})}}function We(s){let t,r;return t=new at({}),{c(){O(t.$$.fragment)},l(e){P(t.$$.fragment,e)},m(e,l){M(t,e,l),r=!0},i(e){r||(x(t.$$.fragment,e),r=!0)},o(e){k(t.$$.fragment,e),r=!1},d(e){j(t,e)}}}function It(s){let t,r,e,l,n,a,u,o,f,g,c,i,d,b,h=s[0]&&We();return a=new kt({}),o=new dt({}),c=new Dt({}),d=new yt({}),{c(){t=v("meta"),r=I(),h&&h.c(),e=I(),l=v("div"),n=v("div"),O(a.$$.fragment),u=I(),O(o.$$.fragment),f=I(),g=v("div"),O(c.$$.fragment),i=I(),O(d.$$.fragment),this.h()},l(_){const T=rt('[data-svelte="svelte-pj5ttw"]',document.head);t=w(T,"META",{name:!0,content:!0}),T.forEach(m),r=S(_),h&&h.l(_),e=S(_),l=w(_,"DIV",{class:!0});var U=y(l);n=w(U,"DIV",{class:!0});var E=y(n);P(a.$$.fragment,E),u=S(E),P(o.$$.fragment,E),E.forEach(m),f=S(U),g=w(U,"DIV",{class:!0});var B=y(g);P(c.$$.fragment,B),i=S(B),P(d.$$.fragment,B),B.forEach(m),U.forEach(m),this.h()},h(){document.title="LCD \u2022 Editor",p(t,"name","description"),p(t,"content","Editor used to create custom characters for LCD displays."),p(n,"class","main mx-auto mt-4 flex w-full max-w-5xl flex-col flex-wrap justify-around lg:flex-row "),p(g,"class","mx-auto w-full max-w-5xl"),p(l,"class","flex flex-col items-center")},m(_,T){$(document.head,t),V(_,r,T),h&&h.m(_,T),V(_,e,T),V(_,l,T),$(l,n),M(a,n,null),$(n,u),M(o,n,null),$(l,f),$(l,g),M(c,g,null),$(g,i),M(d,g,null),b=!0},p(_,[T]){_[0]?h?T&1&&x(h,1):(h=We(),h.c(),x(h,1),h.m(e.parentNode,e)):h&&(oe(),k(h,1,1,()=>{h=null}),ue())},i(_){b||(x(h),x(a.$$.fragment,_),x(o.$$.fragment,_),x(c.$$.fragment,_),x(d.$$.fragment,_),b=!0)},o(_){k(h),k(a.$$.fragment,_),k(o.$$.fragment,_),k(c.$$.fragment,_),k(d.$$.fragment,_),b=!1},d(_){m(t),_&&m(r),h&&h.d(_),_&&m(e),_&&m(l),j(a),j(o),j(c),j(d)}}}function St(s,t,r){let e,l;return Q(s,A,n=>r(1,e=n)),Q(s,st,n=>r(0,l=n)),s.$$.update=()=>{s.$$.dirty&2&&z(A,e.grid=new Array(e.height).fill(!1).map((n,a)=>new Array(e.width).fill(!1).map((u,o)=>{var f,g;return(g=(f=e.grid[a])==null?void 0:f[o])!=null?g:!1})),e)},[l,e]}class Ut extends te{constructor(t){super();re(this,t,St,It,le,{})}}export{Ut as default};
